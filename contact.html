
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Carte Contact</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f0f0f0; }
    .card { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
    img { max-width: 100%; border-radius: 10px; }
  </style>
</head>
<body>
  <div class="card" id="card"></div>
  <script>
    async function loadContact() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");
      if (!id) return document.getElementById("card").innerText = "ID manquant.";
      const res = await fetch("contacts/" + id + ".json");
      const data = await res.json();
      document.getElementById("card").innerHTML = \`
        <img src="photos/\${data.id_photo}" alt="Photo de \${data.prenom}">
        <h2>\${data.prenom} \${data.nom}</h2>
        <p><strong>Entreprise:</strong> \${data.societe}</p>
        <p><strong>Fonction:</strong> \${data.fonction}</p>
        <p><strong>Email:</strong> <a href="mailto:\${data.email}">\${data.email}</a></p>
        <p><strong>Téléphone:</strong> <a href="tel:\${data.telephone}">\${data.telephone}</a></p>
        <p><strong>Site Web:</strong> <a href="\${data.site_web}" target="_blank">\${data.site_web}</a></p>
        <p><strong>Description:</strong> \${data.description}</p>
        <p>
          <a href="\${data.instagram}">Instagram</a> |
          <a href="\${data.linkedin}">LinkedIn</a> |
          <a href="\${data.google_business}">Google Business</a> |
          <a href="\${data.facebook}">Facebook</a>
        </p>
        <br>
        <a href="data:text/vcard;charset=utf-8,BEGIN:VCARD%0AVERSION:3.0%0AFN:\${data.prenom} \${data.nom}%0AORG:\${data.societe}%0ATITLE:\${data.fonction}%0AEMAIL:\${data.email}%0ATEL:\${data.telephone}%0AURL:\${data.site_web}%0AEND:VCARD" download="\${data.prenom}_\${data.nom}.vcf">
          <button>Ajouter au répertoire</button>
        </a>
      \`;
    }
    loadContact();
  </script>
</body>
</html>
